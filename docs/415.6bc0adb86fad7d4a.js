"use strict";(self.webpackChunkSecondAssignment_On_Ecommerce=self.webpackChunkSecondAssignment_On_Ecommerce||[]).push([[415],{6415:(V,p,a)=>{a.r(p),a.d(p,{UserModule:()=>W});var m=a(6814),o=a(95),_=a(1120),e=a(4769),g=a(9372),c=a(2425);function A(t,i){1&t&&(e.TgZ(0,"p",19),e._uU(1," User name at least 3 characters. "),e.qZA())}function Z(t,i){1&t&&(e.TgZ(0,"p",19),e._uU(1," User name max length 15 char. "),e.qZA())}function U(t,i){1&t&&(e.TgZ(0,"p",19),e._uU(1," user name is Required "),e.qZA())}function v(t,i){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,A,2,0,"p",18),e.YNc(2,Z,2,0,"p",18),e.YNc(3,U,2,0,"p",18),e.qZA()),2&t){const r=e.oxw();let s,n,l;e.xp6(1),e.Q6J("ngIf",null==(s=r.userDataForm.get("name"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(n=r.userDataForm.get("name"))?null:n.getError("maxlength")),e.xp6(1),e.Q6J("ngIf",null==(l=r.userDataForm.get("name"))?null:l.getError("required"))}}function T(t,i){1&t&&(e.TgZ(0,"p",19),e._uU(1," Email is Invalid "),e.qZA())}function x(t,i){1&t&&(e.TgZ(0,"p",19),e._uU(1," Email is Required "),e.qZA())}function q(t,i){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,T,2,0,"p",18),e.YNc(2,x,2,0,"p",18),e.qZA()),2&t){const r=e.oxw();let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=r.userDataForm.get("email"))?null:s.getError("email")),e.xp6(1),e.Q6J("ngIf",null==(n=r.userDataForm.get("email"))?null:n.getError("required"))}}function I(t,i){1&t&&(e.TgZ(0,"p",19),e._uU(1," Phone is Invalid "),e.qZA())}function C(t,i){1&t&&(e.TgZ(0,"p",19),e._uU(1," phone is Required "),e.qZA())}function F(t,i){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,I,2,0,"p",18),e.YNc(2,C,2,0,"p",18),e.qZA()),2&t){const r=e.oxw();let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=r.userDataForm.get("phone"))?null:s.getError("pattern")),e.xp6(1),e.Q6J("ngIf",null==(n=r.userDataForm.get("phone"))?null:n.getError("required"))}}function b(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Edit Data"),e.qZA())}function y(t,i){1&t&&e._UZ(0,"i",20)}let N=(()=>{class t{constructor(r,s){this._UserService=r,this.toaster=s,this.loading=!1,this.clicked=!1,this.userAddresses=[],this.userDataForm=new o.cw({name:new o.NI("",[o.kI.required,o.kI.maxLength(15),o.kI.minLength(3)]),phone:new o.NI("",[o.kI.required,o.kI.pattern(/^01[0125][0-9]{8}$/)]),email:new o.NI("",[o.kI.required,o.kI.email])})}ngOnInit(){}handleUserDataForm(r){console.log(r.value),this.clicked=!0,this.loading=!0,this.userDataForm.invalid?this.loading=!0:(this.loading=!0,this.userDataForm.valid&&this._UserService.updateUserData(r.value).subscribe({next:s=>{this.loading=!1,"success"===s.message&&(console.log(s.user),this.toaster.success("Your data is Updated Successfully","",{timeOut:3e3}),this.resetForm())},error:s=>{console.log(s),this.toaster.error(`${s.error.errors.msg}`,"",{timeOut:3e3}),this.loading=!1}}))}resetForm(){this.userDataForm.reset(),this.clicked=!1}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(g.K),e.Y36(c._W))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-user"]],decls:29,vars:7,consts:[[1,"container","mt-5","py-5"],[1,"row"],[1,"col-md-4"],["src","../../../assets/images/account-profile.webp","alt","slider",1,"w-100","py5"],[1,"col-md-8"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["for","_name"],["type","text","id","_name","formControlName","name",1,"form-control"],["class","py-2 fst-italic",4,"ngIf"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","_phone"],["type","tel","id","_phone","formControlName","phone",1,"form-control"],["type","submit",1,"btn","Add-btn",3,"disabled"],[4,"ngIf"],["class","fa-solid fa-spinner fa-spin fs-4",4,"ngIf"],[1,"py-2","fst-italic"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],[1,"fa-solid","fa-spinner","fa-spin","fs-4"]],template:function(s,n){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",1)(6,"div",5)(7,"h1"),e._uU(8,"Edit User Data"),e.qZA()(),e.TgZ(9,"form",6),e.NdJ("ngSubmit",function(){return n.handleUserDataForm(n.userDataForm)}),e.TgZ(10,"div",5)(11,"label",7),e._uU(12,"User Name"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,v,4,3,"div",9),e.qZA(),e.TgZ(15,"div",5)(16,"label",10),e._uU(17,"Email"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,q,3,2,"div",9),e.qZA(),e.TgZ(20,"div",5)(21,"label",12),e._uU(22,"User Phone"),e.qZA(),e._UZ(23,"input",13),e.YNc(24,F,3,2,"div",9),e.qZA(),e.TgZ(25,"div",5)(26,"button",14),e.YNc(27,b,2,0,"span",15),e.YNc(28,y,1,0,"i",16),e.qZA()()()()()()()),2&s){let l,d,u;e.xp6(9),e.Q6J("formGroup",n.userDataForm),e.xp6(5),e.Q6J("ngIf",(null==(l=n.userDataForm.get("name"))?null:l.touched)||n.clicked),e.xp6(5),e.Q6J("ngIf",(null==(d=n.userDataForm.get("email"))?null:d.touched)||n.clicked),e.xp6(5),e.Q6J("ngIf",(null==(u=n.userDataForm.get("phone"))?null:u.touched)||n.clicked),e.xp6(2),e.Q6J("disabled",n.userDataForm.invalid),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading)}},dependencies:[m.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".container[_ngcontent-%COMP%]{margin-top:5rem}img[_ngcontent-%COMP%]{filter:drop-shadow(-15px 5px 5px rgb(74,79,122))}"]})}return t})();var f=a(8508),J=a(7368);const D=["icon"],Y=["closeModal"];function Q(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"tr",7)(1,"th",32),e._uU(2,"1"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",33),e.NdJ("click",function(){const l=e.CHM(r).$implicit,d=e.oxw();return e.KtG(d.deleteAddress(l._id))}),e._UZ(12,"i",34),e.qZA()()}if(2&t){const r=i.$implicit;e.xp6(4),e.Oqu(r.name),e.xp6(2),e.Oqu(r.details),e.xp6(2),e.Oqu(r.phone),e.xp6(2),e.Oqu(r.city)}}function k(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," User name at least 3 characters. "),e.qZA())}function w(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," User name max length 15 char. "),e.qZA())}function E(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," user name is Required "),e.qZA())}function O(t,i){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,k,2,0,"p",36),e.YNc(2,w,2,0,"p",36),e.YNc(3,E,2,0,"p",36),e.qZA()),2&t){const r=e.oxw();let s,n,l;e.xp6(1),e.Q6J("ngIf",null==(s=r.userAdressForm.get("name"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(n=r.userAdressForm.get("name"))?null:n.getError("maxlength")),e.xp6(1),e.Q6J("ngIf",null==(l=r.userAdressForm.get("name"))?null:l.getError("required"))}}function M(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," Details at least 3 characters. "),e.qZA())}function S(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," Details is Required "),e.qZA())}function R(t,i){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,M,2,0,"p",36),e.YNc(2,S,2,0,"p",36),e.qZA()),2&t){const r=e.oxw();let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=r.userAdressForm.get("details"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(n=r.userAdressForm.get("details"))?null:n.getError("required"))}}function L(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," Phone is invalid "),e.qZA())}function P(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," Phone is Required "),e.qZA())}function G(t,i){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,L,2,0,"p",36),e.YNc(2,P,2,0,"p",36),e.qZA()),2&t){const r=e.oxw();let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=r.userAdressForm.get("phone"))?null:s.getError("pattern")),e.xp6(1),e.Q6J("ngIf",null==(n=r.userAdressForm.get("phone"))?null:n.getError("required"))}}function $(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," City at least 3 characters. "),e.qZA())}function j(t,i){1&t&&(e.TgZ(0,"p",37),e._uU(1," City is Required "),e.qZA())}function B(t,i){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,$,2,0,"p",36),e.YNc(2,j,2,0,"p",36),e.qZA()),2&t){const r=e.oxw();let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=r.userAdressForm.get("city"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(n=r.userAdressForm.get("city"))?null:n.getError("required"))}}const H=[{path:"",redirectTo:"update_user",pathMatch:"full"},{path:"update_user",component:J.v,title:"Forget Password"},{path:"user_data",component:N,canActivate:[f.p]},{path:"user_address",component:(()=>{class t{constructor(r,s){this._UserService=r,this.toaster=s,this.userAddresses=[],this.loading=!1,this.clicked=!1,this.userAdressForm=new o.cw({name:new o.NI("",[o.kI.required,o.kI.maxLength(15),o.kI.minLength(3)]),details:new o.NI("",[o.kI.required,o.kI.minLength(3)]),phone:new o.NI("",[o.kI.required,o.kI.pattern(/^01[0125][0-9]{8}$/)]),city:new o.NI("",[o.kI.required,o.kI.minLength(3)])})}ngOnInit(){this.getAllAddressesOfUser()}getAllAddressesOfUser(){this._UserService.getUserAddress().subscribe({next:r=>{console.log(r),this.userAddresses=r.data,console.log(this.userAddresses)}})}handleUserForm(r){console.log(r.value),this.clicked=!0,this.loading=!0,this.userAdressForm.invalid?this.loading=!0:(this.loading=!0,this.userAdressForm.valid&&this._UserService.addUserAddress(r.value).subscribe({next:s=>{console.log(s),"success"===s.status&&(this.toaster.success(`${s.message}`,"",{timeOut:3e3}),console.log(s.data),this.userAddresses=s.data,this.loading=!1,this.resetForm())},error:s=>{console.log(s),this.toaster.error(`${s.error.errors.msg}`,"",{timeOut:3e3}),this.loading=!1}}))}resetForm(){this.userAdressForm.reset(),this.closeModal?.nativeElement.click()}deleteAddress(r){this._UserService.removeAddress(r).subscribe({next:s=>{console.log(s),this.getAllAddressesOfUser()}})}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(g.K),e.Y36(c._W))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-address"]],viewQuery:function(s,n){if(1&s&&(e.Gf(D,5),e.Gf(Y,5)),2&s){let l;e.iGM(l=e.CRH())&&(n.Icon=l.first),e.iGM(l=e.CRH())&&(n.closeModal=l.first)}},decls:65,vars:7,consts:[[1,"container","my-5","py-5"],[1,"row"],[1,"col-md-12","justify-content-start"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","Add-btn","my-2"],[1,"fa-solid","fa-plus"],[1,"col-md-12"],[1,"table","table-striped","table-dark"],[1,"text-center"],["scope","col"],["class","text-center",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["closeModal",""],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup","ngSubmit"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["class","py-2 fst-italic",4,"ngIf"],["for","details"],["type","text","id","details","formControlName","details",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control"],["type","submit",1,"btn","Add-btn",3,"disabled"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["scope","row"],[3,"click"],[1,"fa-solid","fa-trash-can"],[1,"py-2","fst-italic"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(s,n){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e._uU(4,"Add Address \xa0"),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"div",5)(7,"table",6)(8,"thead")(9,"tr",7)(10,"th",8),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th",8),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th",8),e._uU(15,"Details"),e.qZA(),e.TgZ(16,"th",8),e._uU(17,"Phone"),e.qZA(),e.TgZ(18,"th",8),e._uU(19,"City"),e.qZA(),e.TgZ(20,"th",8),e._uU(21,"Actions"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,Q,13,4,"tr",9),e.qZA()()()()(),e.TgZ(24,"div",10)(25,"div",11)(26,"div",12)(27,"div",13)(28,"h1",14),e._uU(29,"Address"),e.qZA(),e._UZ(30,"button",15,16),e.qZA(),e.TgZ(32,"div",17)(33,"div",18)(34,"div",1)(35,"div",5)(36,"h1"),e._uU(37,"Add New Addresses"),e.qZA()(),e.TgZ(38,"form",19),e.NdJ("ngSubmit",function(){return n.handleUserForm(n.userAdressForm)}),e.TgZ(39,"div",5)(40,"label",20),e._uU(41,"Name:"),e.qZA(),e._UZ(42,"input",21),e.YNc(43,O,4,3,"div",22),e.qZA(),e.TgZ(44,"div",5)(45,"label",23),e._uU(46,"Address Details :"),e.qZA(),e._UZ(47,"input",24),e.YNc(48,R,3,2,"div",22),e.qZA(),e.TgZ(49,"div",5)(50,"label",25),e._uU(51,"Phone :"),e.qZA(),e._UZ(52,"input",26),e.YNc(53,G,3,2,"div",22),e.qZA(),e.TgZ(54,"div",5)(55,"label",27),e._uU(56,"City :"),e.qZA(),e._UZ(57,"input",28),e.YNc(58,B,3,2,"div",22),e.qZA(),e.TgZ(59,"div",5)(60,"button",29),e._uU(61,"Add"),e.qZA()()()()()(),e.TgZ(62,"div",30)(63,"button",31),e._uU(64,"Close"),e.qZA()()()()()),2&s){let l,d,u,h;e.xp6(23),e.Q6J("ngForOf",n.userAddresses),e.xp6(15),e.Q6J("formGroup",n.userAdressForm),e.xp6(5),e.Q6J("ngIf",(null==(l=n.userAdressForm.get("name"))?null:l.touched)||n.clicked),e.xp6(5),e.Q6J("ngIf",(null==(d=n.userAdressForm.get("details"))?null:d.touched)||n.clicked),e.xp6(5),e.Q6J("ngIf",(null==(u=n.userAdressForm.get("phone"))?null:u.touched)||n.clicked),e.xp6(5),e.Q6J("ngIf",(null==(h=n.userAdressForm.get("city"))?null:h.touched)||n.clicked),e.xp6(2),e.Q6J("disabled",n.userAdressForm.invalid)}},dependencies:[m.sg,m.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return t})(),canActivate:[f.p],title:"Adress"}];let K=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#s=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(H),_.Bz]})}return t})();var X=a(8010);let W=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#s=this.\u0275inj=e.cJS({imports:[m.ez,K,o.u5,c.Rh.forRoot(),X.bB,o.UX]})}return t})()}}]);